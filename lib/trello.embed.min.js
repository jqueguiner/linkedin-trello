!function e(t,r,n){function o(a,c){if(!r[a]){if(!t[a]){var l="function"==typeof require&&require;if(!c&&l)return l(a,!0);if(i)return i(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var f=r[a]={exports:{}};t[a][0].call(f.exports,function(e){var r=t[a][1][e];return o(r||e)},f,f.exports,e,t,r,n)}return r[a].exports}for(var i="function"==typeof require&&require,a=0;a<n.length;a++)o(n[a]);return o}({1:[function(e,t,r){(function(e){function r(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function n(e){return!!e&&"object"==typeof e}function o(e){return"symbol"==typeof e||n(e)&&m.call(e)==l}function i(e){if("number"==typeof e)return e;if(o(e))return c;if(r(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=r(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(u,"");var n=d.test(e);return n||s.test(e)?p(e.slice(2),n?2:8):f.test(e)?c:+e}var a="Expected a function",c=NaN,l="[object Symbol]",u=/^\s+|\s+$/g,f=/^[-+]0x[0-9a-f]+$/i,d=/^0b[01]+$/i,s=/^0o[0-7]+$/i,p=parseInt,v="object"==typeof e&&e&&e.Object===Object&&e,h="object"==typeof self&&self&&self.Object===Object&&self,y=v||h||Function("return this")(),m=Object.prototype.toString,b=Math.max,w=Math.min,g=function(){return y.Date.now()};t.exports=function(e,t,n){function o(t){var r=p,n=v;return p=v=void 0,j=t,y=e.apply(n,r)}function c(e){return j=e,m=setTimeout(f,t),k?o(e):y}function l(e){var r=e-j,n=t-(e-T);return O?w(n,h-r):n}function u(e){var r=e-T,n=e-j;return void 0===T||r>=t||r<0||O&&n>=h}function f(){var e=g();if(u(e))return d(e);m=setTimeout(f,l(e))}function d(e){return m=void 0,C&&p?o(e):(p=v=void 0,y)}function s(){var e=g(),r=u(e);if(p=arguments,v=this,T=e,r){if(void 0===m)return c(T);if(O)return m=setTimeout(f,t),o(T)}return void 0===m&&(m=setTimeout(f,t)),y}var p,v,h,y,m,T,j=0,k=!1,O=!1,C=!0;if("function"!=typeof e)throw new TypeError(a);return t=i(t)||0,r(n)&&(k=!!n.leading,h=(O="maxWait"in n)?b(i(n.maxWait)||0,t):h,C="trailing"in n?!!n.trailing:C),s.cancel=function(){void 0!==m&&clearTimeout(m),j=0,p=T=v=m=void 0},s.flush=function(){return void 0===m?y:d(g())},s}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],2:[function(e,t,r){function n(e,t){for(var r=-1,n=e?e.length:0;++r<n&&!1!==t(e[r],r,e););return e}function o(e,t){for(var r=-1,n=Array(e);++r<e;)n[r]=t(r);return n}function i(e,t){var r=K(e)||u(e)?o(e.length,String):[],n=r.length,i=!!n;for(var a in e)!t&&!O.call(e,a)||i&&("length"==a||c(a,n))||r.push(a);return r}function a(e){if(!l(e))return E(e);var t=[];for(var r in Object(e))O.call(e,r)&&"constructor"!=r&&t.push(r);return t}function c(e,t){return!!(t=null==t?b:t)&&("number"==typeof e||j.test(e))&&e>-1&&e%1==0&&e<t}function l(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||k)}function u(e){return d(e)&&O.call(e,"callee")&&(!A.call(e,"callee")||C.call(e)==w)}function f(e){return null!=e&&p(e.length)&&!s(e)}function d(e){return h(e)&&f(e)}function s(e){var t=v(e)?C.call(e):"";return t==g||t==T}function p(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=b}function v(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function h(e){return!!e&&"object"==typeof e}function y(e){return f(e)?i(e):a(e)}function m(e){return e}var b=9007199254740991,w="[object Arguments]",g="[object Function]",T="[object GeneratorFunction]",j=/^(?:0|[1-9]\d*)$/,k=Object.prototype,O=k.hasOwnProperty,C=k.toString,A=k.propertyIsEnumerable,E=function(e,t){return function(r){return e(t(r))}}(Object.keys,Object),x=function(e,t){return function(r,n){if(null==r)return r;if(!f(r))return e(r,n);for(var o=r.length,i=t?o:-1,a=Object(r);(t?i--:++i<o)&&!1!==n(a[i],i,a););return r}}(function(e,t){return e&&I(e,t,y)}),I=function(e){return function(t,r,n){for(var o=-1,i=Object(t),a=n(t),c=a.length;c--;){var l=a[e?c:++o];if(!1===r(i[l],l,i))break}return t}}(),K=Array.isArray;t.exports=function(e,t){return(K(e)?n:x)(e,"function"==typeof t?t:m)}},{}],3:[function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var o=function(){function e(e,t){var r=[],n=!0,o=!1,i=void 0;try{for(var a,c=e[Symbol.iterator]();!(n=(a=c.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){o=!0,i=e}finally{try{!n&&c.return&&c.return()}finally{if(o)throw i}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=e("lodash.debounce"),c=e("lodash.foreach"),l=function(e){if(!document.body.contains(e))return!1;var t=e.getBoundingClientRect();return t.top<=window.innerHeight&&t.top+t.height>=0&&t.left<=window.innerWidth&&t.left+t.width>=0},u=function(e){return"https://trello.com"===e},f=/^(https:\/\/trello\.com)\/b\/([a-zA-Z0-9]+)/,d=/^(https:\/\/trello\.com)\/c\/([a-zA-Z0-9]+)/,s=function(e){return/^[a-f0-9]{24}$/.test(e)||/^[a-zA-Z0-9]{8}$/.test(e)},p=function(e,t,r,n){e&&e.contentWindow&&e.contentWindow.postMessage({secret:r,command:"polling",options:{enabled:n}},t)},v=function(){function e(){var t=this;n(this,e),this.activeCards={};window.addEventListener("message",function(e){if(u(e.origin)&&"resize"===e.data.command&&e.data.secret){var r=t.activeCards[e.data.secret];if(!r||!r.el)return;var n=e.data.options.height;void 0!==n&&(r.el.height=n),p(r.el,e.origin,e.data.secret,l(r.el))}},!1),window.addEventListener("resize",a(function(){return t.reassessVisibility()},1e3)),window.addEventListener("scroll",a(function(){return t.reassessVisibility()},1e3)),"complete"===document.readyState?this.load():window.addEventListener("load",function(){return t.load()})}return i(e,[{key:"reassessVisibility",value:function(){c(this.activeCards,function(e,t){var r=e.el,n=e.host;document.body.contains(r)&&p(r,n,t,l(r))})}},{key:"createCardIframe",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=document.createElement("iframe"),a=encodeURIComponent(window.location.origin),c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=Array(24).join().split(",").map(function(){return c.charAt(Math.floor(Math.random()*c.length))}).join("");if(i.src=e+"/embed/card?id="+t+"&targetOrigin="+a+"&secret="+l+"&compact="+(!0===n),i.width=316,i.height=152,i.style.border="none",i.style.overflow="hidden",i.className="trello-card trello-card-rendered",n&&i.classList.add("trello-card-compact"),o&&o.apiToken&&o.apiKey){var u=o.apiKey,f=o.apiToken;i.name=JSON.stringify({apiKey:u,apiToken:f})}return this.activeCards[l]={el:i,host:e},i}},{key:"create",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{compact:!1},n=r.compact,i=r.apiKey,a=r.apiToken,c="https://trello.com",l=e;if(d.test(l)){var u=d.exec(l);if(!u||!u[1]||!u[2])throw new Error("Invalid Trello card url");var f=o(u,3);c=f[1],l=f[2]}if(!s(l))throw new Error("Invalid Trello card id");var p=this.createCardIframe(c,l,"Trello Card",n,{apiKey:i,apiToken:a});t.appendChild(p)}},{key:"load",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{compact:!1,allAnchors:!1},n=r.allAnchors,o=r.compact,i=r.apiToken,a=r.apiKey,l=n?"a":"blockquote.trello-card>a, blockquote.trello-card-compact>a",u=(e||document).querySelectorAll(l);c(u,function(e){var r=e.href,c=d.exec(r);if(c&&c[1]&&c[2]){var l=c[1],u=c[2],f=e.innerText,s=!0===o||e.parentElement.classList.contains("trello-card-compact"),p=t.createCardIframe(l,u,f,s,{apiKey:a,apiToken:i});if(n)e.parentNode.replaceChild(p,e);else{var v=e.parentNode;v.parentNode.replaceChild(p,v)}}})}}]),e}(),h=function(){function e(){var t=this;n(this,e),"complete"===document.readyState?this.load():window.addEventListener("load",function(){return t.load()})}return i(e,[{key:"createBoardIframe",value:function(e,t,r,n){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},i=document.createElement("iframe"),a=encodeURIComponent(window.location.origin),c="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",l=Array(24).join().split(",").map(function(){return c.charAt(Math.floor(Math.random()*c.length))}).join("");if(i.src=e+"/embed/board?id="+t+"&targetOrigin="+a+"&secret="+l+"&compact="+(!0===n),i.width=248,i.height=n?185:218,i.style.border="none",i.style.overflow="hidden",i.className="trello-board trello-board-rendered",n&&i.classList.add("trello-board-compact"),o&&o.apiToken&&o.apiKey){var u=o.apiKey,f=o.apiToken;i.name=JSON.stringify({apiKey:u,apiToken:f})}return i}},{key:"create",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=r.apiKey,i=r.apiToken,a="https://trello.com",c=e;if(f.test(c)){var l=f.exec(c);if(!l||!l[1]||!l[2])throw new Error("Invalid Trello board url");var u=o(l,3);a=u[1],c=u[2]}if(!s(c))throw new Error("Invalid Trello board id");var d=this.createBoardIframe(a,c,"Trello Board",!0,{apiKey:n,apiToken:i});t.appendChild(d)}},{key:"load",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allAnchors:!1},n=r.allAnchors,o=r.apiKey,i=r.apiToken,a=n?"a":"blockquote.trello-board-compact>a",l=(e||document).querySelectorAll(a);c(l,function(e){var r=e.href,a=f.exec(r);if(a&&a[1]&&a[2]){var c=a[1],l=a[2],u=e.innerText,d=t.createBoardIframe(c,l,u,!0,{apiKey:o,apiToken:i});if(n)e.parentNode.replaceChild(d,e);else{var s=e.parentNode;s.parentNode.replaceChild(d,s)}}})}}]),e}();window.TrelloCards||(window.TrelloCards=new v),window.TrelloBoards||(window.TrelloBoards=new h)},{"lodash.debounce":1,"lodash.foreach":2}]},{},[3]);